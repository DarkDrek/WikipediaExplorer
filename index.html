<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="css.css" type="text/css" media="screen" charset="utf-8"/>
    <link rel="stylesheet" href="css/box.css" type="text/css" media="screen" charset="utf-8"/>
</head>
<body>
<!-- libs -->
<script src="js/d3.v3.js" charset="utf-8"></script>
<script src="js/box.js" charset="utf-8"></script>
<script src="//marvl.infotech.monash.edu/webcola/cola.v3.min.js"></script>
<script src="MediawikiJS.js"></script>
<script src="js/chain.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>

<!-- own scripts -->
<script src="wikiExplorer.js" charset="utf-8"></script>
<script src="graph.js" charset="utf-8"></script>
<script src="overviewStatistics.js"></script>
<script src="boxPlot.js" charset="UTF-8"></script>

<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $("a[rel^='prettyPhoto']").prettyPhoto({
            social_tools: false
        });
    });
</script>

<script>

    var lang = "en";
    var scaleSize, scaleLinksCount, data;
    var api = new WikipediaExplorerAPI(lang);

    var boxes = svg = d3.select("body").append("svg")
            .attr("width", 350)
            .attr("height", 700)
            .attr("id", "boxes")
            .attr("transform", "translate(1500,50)");

    var linkBox = [[]];
    linkBox[0][0] = "Links";
    linkBox[0][1] = [0];
    var links = new boxPlot(boxes, linkBox, {min: 0, max: 0});

    function tick() {
        path.attr("d", linkArc);
        marker.attr("refX", markerRefX);
        circle.attr("transform", transform);
        circle.style("fill", circleFill);
        circle.attr("r", circleRadius);
        text.attr("transform", transform);
        text.attr("x", textX);
        links_max.text(linksMaxText);
        links_min.text(linksMinText);
        links_average.text(linksAverageText);
        var d = linksStatisicCallback();
        links.setData(d.d,{min:d.min,max:d.max});
    }

    overview();

    api.getRandom(function (d) {
        data = d;
        initScales();
        graph();
    }, 7);

    function linksStatisicCallback() {
        linkBox[0][1] = [];
        var min = Infinity;
        var max = -Infinity;
        if (data) {
            $.each(data.nodes, function (i, n) {
                if (n.linkscount) {
                    min = Math.min(min, n.linkscount);
                    max = Math.max(max, n.linkscount);
                    linkBox[0][1].push(n.linkscount);
                }
            });
            return {min: min, max: max, d: linkBox};
        }
        return {min: 0, max: 0, d: [0]};
    }


</script>


<input type="text" placeholder="search..." id="txtSearch">
</body>
</html>